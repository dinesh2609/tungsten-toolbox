The Tungsten Replicator cookbook

(C) Continuent, Inc, 2012
Released under the New BSD license. 
See http://code.google.com/p/tungsten-toolbox/ for more information.

OVERVIEW

This is a collection of recipes to install several replication topologies using Tungsten Replicator.

The following topologies are supported

* master/slave (one master, many slaves)
* fan-in (many masters, one slave)
* all-masters (many masters, with slave services for all nodes)
* star schema (many masters, interconnected through a hub)


GETTING STARTED:

1) unpack the Tungsten tarball
2) edit ./cookbook/COMMON_NODES.sh file, with the list of your nodes
3) If you are using a number of nodes other than 4, in the NODES_xxxxxx file, 
   a) add as many nodes you are using
   b) check the variables ALL_NODES, MASTERS, and SLAVES, and make sure that they list existing nodes
   c) if you are using less than 4 nodes, comment out the extra ones
4) edit ./cookbook/USER_VALUES.sh
5) Run the command corresponding to the topology you want to install. The command must run from the directory above the cookbook, i.e the directory from where you can access ./tools/tungsten-replicator.
For example:
   ./cookbook/install_master_slave.sh
   ./cookbook/install_all_masters.sh
   ./cookbook/install_fan_in.sh
   ./cookbook/install_star.sh


AFTER INSTALLATION

There are a few tools that come together with the cookbook.
As a static bonus, you get a log of the installation, named ./cookbook/current_install.log. That file says the installation type, the date and time of the installation, and the commands that were executed to install the cluster.

You have also some more active tools. There are show* commands that display the status of the cluster

* ./cookbook/show_master_slave.sh
* ./cookbook/show_star.sh
* ./cookbook/show_fan_in.sh
* ./cookbook/show_all_masters.sh

And similar commands that check the replication flow across the cluster

* ./cookbook/test_master_slave.sh
* ./cookbook/test_star.sh
* ./cookbook/test_fan_in.sh
* ./cookbook/test_all_masters.sh

And finally commands that remove the installed replicators and clean up the databases.

* ./cookbook/clear_cluster_master_slave.sh
* ./cookbook/clear_cluster_star.sh
* ./cookbook/clear_cluster_fan_in.sh
* ./cookbook/clear_cluster_all_masters.sh

TESTING ALL TOPOLOGIES
If you want to test all topologies in one go, after you have updated COMMON_NODES.sh (and eventually all the NODES_*.sh files if you are using more nodes), you can run

./cookbook/test_all_topologies.sh

This command will install, test, and uninstall all topologies, and return the summary of tests results (total, pass, fail).



